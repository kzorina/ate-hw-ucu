arXiv:0803.3187v2 [cs.LO] 25 Mar 2008  Labeled Natural Deduction Systems for a Family of Tense Logics  (Extended Version)  Luca ViganoĚ  Marco Volpe  Department of Computer Science, University of Verona, Italy  {luca.vigano, marco.volpe}@univr.it  Abstract  We give labeled natural deduction systems for a family of tense logics extending the basic linear tense logic Kl . We prove  that our systems are sound and complete with respect to the usual Kripke semantics, and that they possess a number of useful  normalization properties (in particular, derivations reduce to a normal form that enjoys a subformula property). We also  discuss how to extend our systems to capture richer logics like (fragments of) LTL.  1 Introduction  Hilbert-style systems, although uniform, are difficult to use in practice, especially in comparison with the more ânaturalâ  Gentzen-style systems such as natural deduction (ND), sequent, and tableaux systems. However, devising Gentzen-style systems for modal, relevance, and other non-classical logics often requires considerable ingenuity, as well as trading uniformity  for simplicity and usability. A solution to this problem is to employ labeling techniques, which provide a general framework  for presenting different logics in a uniform way in terms of Gentzen-style systems.  The intuition is that labeling (also called prefixing, annotating or subscripting) allows one to explicitly encode additional  information, of a semantic or proof-theoretical nature, that is otherwise implicit in the logic one wants to capture. So, for  instance, instead of a modal formula A, we can consider the labeled formula (lwff) x : A, which intuitively means that A  holds at the world denoted by x within the underlying Kripke semantics. We can also use labels to specify how worlds are  related in a particular Kripke model, e.g. the relational formula (rwff) x < y states that the world y is accessible from x.  Labeled deduction systems have been given for several non-classical logics, e.g. [1, 3, 6, 7, 8, 11, 12, 13, 16, 19], and  research has focused not only on the design of systems for specific logics, but also, more generally, on the characterization  of the classes of logics that can be formalized this way. General properties and limitations of labeling techniques have also  been investigated. For example, [19] highlights an important trade-off between limitations and properties, which can be  roughly summarized as follows. Assume that we have a set of rules for reasoning about the introduction and elimination of  modal operators in lwffs x : A such as the following rules for , where we express x : A as the metalevel implication  x < y =â y : A for an arbitrary y accessible from x (y is fresh, i.e. it is different from x and does not occur in any  assumption on which y : A depends other than x < y):  [x < y]  .  ..  .  y:A  I (y fresh)  x : A  x : A x < y  E .  y:A  Assume also that we reason on the semantic information provided by labeling using Horn-style relational rules  x 1 < y1  . . . x n < yn  x 0 < y0  where the xi and yi are labels, and n âĽ 0 (so that the rule has no premises when n = 0). While restricting our systems to  such Horn rules allows us to present only a subset of all possible non-classical logics, we can still capture several of the most  common modal and relevance logics, and, more importantly, labeling provides an efficient general method for establishing  the metatheoretical properties of these logics, including their completeness, decidability, and computational complexity. This  method relies on the separation between the sub-system for reasoning about lwffs and the sub-system for reasoning about  rwffs: derivations of lwffs can depend on derivations of rwffs (e.g. via the  rules), but rwffs depend only on rwffs (via the  Horn rules).  In this paper, we give labeled natural deduction systems for a family of tense logics extending the basic linear tense logic  Kl [15]. Our starting point is [19] but it should be immediately clear that Horn rules do not suffice: even a minimal tense  logic like Kl requires its time points to be connected, i.e. for any two points x and y either x = y, or x is before y, or y  is before x. It is straightforward to see that such a property cannot be captured by a Horn rule like the one above; rather,  we need non-atomic rwffs, in particular disjunction (â) of relations, and more complex rules built using a full first-order  language, such as the axiom  âx.y. x < y â x = y â y < x  conn .  A similar situation occurs if we wish to impose irreflexivity of our worlds. And thatâs not all: as shown in [19] (in the case of  modal logics, but the same arguments apply here, mutatis mutandis), if we move to such a first-order language and wish to  retain completeness of the resulting systems, then we need to abandon the strict separation between the sub-system for lwffs  and that for rwffs (and let derivations of rwffs depend also on lwffs). As we will see in more detail below, this is best achieved  by introducing a so-called universal falsum, so that a contradiction in a world can be propagated not only to any other world  but also to the relational structure to derive any rwff; and, vice versa, from a contradiction in the relational sub-system we  can obtain any lwff.  The main contributions, and the structure, of this paper are thus the following. In Section 2, we give a brief presentation of  the syntax and semantics, and of a standard axiomatization, of Kl. In Section 3, we give a labeled natural deduction system  N (Kl) for Kl , which we show to be sound and complete (extending the completeness proofs given for modal logics in [19]).  Then, in Section 4, we show that N (Kl) possesses a number of useful normalization properties; in particular, derivations  reduce to a normal form that enjoys a subformula property. In Section 5, we extend N (Kl) to capture some interesting  extensions of Kl , and in Section 6 we discuss how to extend our systems to capture richer logics like (fragments of) LTL.  We conclude, in Section 7, by comparing with related work and discussing future work. Detailed proofs and examples are  given in an appendix.  2 The basic linear tense logic Kl  2.1  Syntax  Definition 1 Given a set P of propositional variables, the set of well-formed Kl formulas is defined by the following  Backus-Naur-form presentation, where p â P:  A ::= p |âĽ| A â A | GA | HA .  Truth of a tense formula is relative to a world in a model, so, intuitively, GA holds at a world iff A always holds in the future,  and HA holds at a world iff A always holds in the past. We will formalize this standard semantics below, but in order to  give a labeled ND system for Kl , we extend the syntax with labels and relational symbols that capture the worlds and the  accessibility relation between them.  Definition 2 Let L be a set of labels and let x and y be labels in L. If A is a well-formed Kl formula, then x : A is a labeled  well-formed formula (labeled formula or lwff, for short).  The set of well-formed relational formulas (relational formulas or rwffs, for short) is defined as follows:  Ď ::= x < y | x = y | â | Ď â Ď | âx. Ď .  We write Ď to denote a generic formula (lwff or rwff). We say that an lwff x : A is atomic when A is atomic, i.e. A is a  propositional variable or A is âĽ. An rwff Ď is atomic when it does not contain any connective or quantifiers, i.e. Ď is â or Ď  has the form x < y or x = y. The grade of an lwff or rwff is the number of occurrences of connectives (â or â), operators  (G or H), and quantifiers (â). Finally, given a set of lwffs Î and a set of rwffs â, we call the ordered pair (Î, â) a proof  context.  The given syntax uses a minimal set of connectives, operators, and quantifiers. As usual, we can introduce abbreviations  and use, e.g., âź, â§, â¨ and ÂŹ, â, â, for the negation, the conjunction, and the disjunction in the labeled language and in the  2  relational one, respectively. For instance, âź A âĄ A ââĽ and Ďâ˛ â Ďâ˛â˛ âĄ (Ďâ˛ â â) â Ďâ˛â˛ . We can also define â¤ âĄ âźâĽ, other  quantifiers, e.g. âx. Ď âĄ ÂŹâx. ÂŹĎ, and other temporal operators, e.g. FA âĄ âź G âź A to express that A holds sometime in  the future.  2.2  Semantics  Definition 3 A Kl frame is a pair (W, âş), where W is a non-empty set of worlds and âş â W Ă W is a binary relation that  satisfies the properties of irreflexivity, transitivity and connectedness, i.e. for all (x, y) â W 2 we have x = y or (x, y) ââş or  (y, x) ââş.  A Kl model is a triple (W, âş, V), where (W, âş) is a Kl frame and the valuation V is a function that maps an element of  W and a propositional variable to a truth value (0 or 1).  In order to give a semantics for our labeled system, we need to define explicitly an interpretation of labels as worlds.  Definition 4 Given a set of labels L and a model M = (W, âş, V), an interpretation is a function Îť : L â W that maps  every label in L to a world in W.  Given a model M and an interpretation Îť on it, truth for an rwff or lwff Ď is the smallest relation |=M,Îť satisfying:  |=M,Îť  |=M,Îť  |=M,Îť  |=M,Îť  x<y  x=y  Ď1 â Ď2  âx. Ď  iff  iff  iff  iff  (Îť(x), Îť(y)) ââş;  Îť(x) = Îť(y);  |=M,Îť Ď1 implies |=M,Îť Ď2 ;  for all y, |=M,Îť Ď[y/x];  |=M,Îť  |=M,Îť  |=M,Îť  |=M,Îť  x  x  x  x  iff  iff  iff  iff  V(Îť(x), p) = 1;  |=M,Îť x : A implies |=M,Îť x : B;  for all y, |=M,Îť x < y implies |=M,Îť y : A;  for all y, |=M,Îť y < x implies |=M,Îť y : A.  :p  :AâB  : GA  : HA  Hence, 2M,Îť x : âĽ and 2M,Îť â. When |=M,Îť Ď, we say that Ď is true in M according to the interpretation Îť. By  extension:  |=M,Îť Î  |=M,Îť â  |=M,Îť (Î, â)  Î, â |=M,Îť Ď  iff  iff  iff  iff  |=M,Îť  |=M,Îť  |=M,Îť  |=M,Îť  x : A for all x : A â Î;  Ď for all Ď â â;  Î and |=M,Îť â;  (Î, â) implies |=M,Îť Ď.  Truth for lwffs and rwffs built using other connectives or operators can be defined in the usual manner.1  2.3  An axiomatization of Kl  Several different Hilbert-style axiomatizations have been given for the logic Kl; the following one is taken from [15]:  (G1 ) G(A â B) â (GA â GB)  (G2 ) âź H âź GA â A  (G3 ) GA â GGA  (G4 ) [G(A â¨ B) â§ G(A â¨ GB) â§ G(GA â¨ B)] â (GA â¨ GB)  (NecG ) If â˘ A then â˘ GA  (NecH ) If â˘ A then â˘ HA  (MP ) If â˘ A and â˘ A â B then â˘ B  The axiom (G1 ) is standard for modal and temporal logics, while (G2 ) sets the dual relation between G and H, (G3 )  expresses the transitivity and (G4 ) the connectedness of G. For brevity, we have omitted the symmetric axioms (H1 )-(H4 )  that are obtained by replacing every G by H and vice versa. Moreover, every classical tautology is a tautology, and there are  rules for modus ponens and necessitation for both G and H.  1 Note  that truth for lwffs is related to the standard truth relation for modal logics by observing that |=M x : A iff |=M  x A.  3  [x : A ââĽ]  ..  ..  y :âĽ  RAAâĽ  x:A  [x : A]  .  ..  .  x:B  âI  x:AâB  [Ď â â]  ..  ..  â  Ď RAAâ  x:AâB x:A  âE  x:B  [Ď1 ]  ..  .  .  Ď2  Ď1 â Ď2 âI  âx.y.z. (x < y â y < z) â x < z  Ď1 â Ď2  Ď2  trans <  Ď1  âE  [x < y]  ..  ..  y:A  GI â  x : GA  Ď  âI â  âx. Ď  x : GA x < y  GE  y:A  âx. Ď  âE  Ď[y/x]  âx.y. x < y â x = y â y < x  âx. x = x  conn  Ď  [y < x]  ..  ..  y:A  HI â  x : HA  refl =  x=y  Ď[y/x]  mon  x : HA y < x  HE  y:A  âx. ÂŹ(x < x)  x :âĽ  uf 1  â  irrefl <  â  uf 2  x :âĽ  *In GI (respectively, HI), y is different from x and does not occur in any assumption on which y : A depends other than the discarded assumption x < y  (respectively, y < x).  In âI, the variable x must not occur in any open assumption on which Ď depends.  Figure 1. The rules of N (Kl)  3 A labeled natural deduction system for Kl  Our labeled ND system N (Kl) = N (KlL ) + N (KlR ) + N (KlG ) comprises of three sub-systems, whose rules are given  in Figure 1.  The propositional and temporal rules of N (KlL ) allow us to derive lwffs from other lwffs with the help of rwffs. The  rules âI and âE are just the labeled version of the standard ([14, 17]) ND rules for implication introduction and elimination,  where the notion of discharged/open assumption is also standard (e.g. the formula [x : A] is discharged in the rule âI). The  rule RAAâĽ is a labeled version of reductio ad absurdum, where we do not enforce Prawitzâs side condition that A 6= âĽ.2  The temporal operators G and H share the structure of the basic introduction/elimination rules, with respect to the same  accessibility relation <; this holds because, for instance, we express x : GA as the metalevel implication x < y =â y : A  for an arbitrary y accessible from x (as we did for  in the introduction).  The relational rules of N (KlR ) allow us to derive rwffs from other rwffs only. The rules RAAâ , â I, and â E are  reductio ad absurdum and implication introduction and elimination for rwffs, while âI and âE are the standard rules for  universal quantification, with the usual proviso for âI. There are also four axiomatic rules (or âaxiomsâ, for short) refl =,  irrefl <, trans <, and conn, which express the properties of =3 and <, where, for readability, we employed the symbols for  disjunction, conjunction, and negation.  The general rules of N (KlG ) allow us to derive lwffs from rwffs and vice versa. The rule mon applies monotonicity to an  lwff or rwff Ď, while the rules uf 1 and uf 2 export falsum (and we thus call it a universal falsum) from the labeled sub-system  to the relational one, and vice versa.4  Definition 5 (Derivations and proofs) A derivation of a formula (lwff or rwff) Ď from a proof context (Î, â) in N (Kl) is a  tree formed using the rules in N (Kl), ending with Ď and depending only on a finite subset of Î âŞ â. We then write Î, â â˘ Ď.  A derivation of Ď in N (Kl) depending on the empty set, â˘ Ď, is a proof of Ď in N (Kl) and we then say that Ď is a theorem  of N (Kl).  2 See [19] for a detailed discussion on RAA , which in particular explains how, in order to maintain the duality of modal operators like  and âŚ, the  âĽ  rule must allow one to derive x : A from a contradiction âĽ at a possibly different world y, and thereby discharge the assumption x : A ââĽ.  3 Note that we do not need further axioms to express symmetry and transitivity of =, since the former can be derived by using mon , conn , and irrefl <,  and the latter by using mon.  4 Note that the presentation of the system could be simplified by introducing a unique symbol for falsum (say f), shared by the labeled and the relational  sub-systems. In that case, we would not need the rules uf 1 and uf 2, while the rules for falsum elimination RAAâĽ and RAAâ could be replaced by the  following rule, where with âĎ we denote the negation of a generic formula (labeled or relational):  [âĎ]  ..  ..  f  Ď RAAf  However, we prefer to maintain a clear separation between the two sub-systems, as it will allow us to give a simpler presentation of normalization.  4  [y : A][x < y]  ..  .  .  z:B  x : FA  FE â  z:B  y:A x<y  FI  x : FA  [y : A][y < x]  ..  .  .  y:A y<x  z:B  x : PA  PI  PE â  x : PA  z:B  [Ď[y/x]]  ..  [Ď1 ] [Ď2 ]  ..  ..  ..  ..  ..  â˛  âx.  Ď  Ď  Ď[y/x]  Ď1 â Ď2  Ď  Ď  âE â  âI  âE  Ď  âx. Ď  Ďâ˛  Ď2  Ď1 â Ď2 âI2  Ď1  Ď1 â Ď2 âI1  *In FE (respectively, PE), y is different from x and z, and does not occur in any assumption on which the upper occurrence of z : B depends other than  y : A or x < y (respectively, y < x).  In âE, y does not occur in any assumption on which the upper occurrence of Ďâ˛ depends other than Ď[y/x].  Figure 2. Some derived rules  [x<y]1  Ď2  Ď  x<z  y:A  x:GA  GI 1  z:A  Ď2  x<z  Ď[z/y]  GE  z:A  (a) Reduction for the detour GI /GE  Ď  x:âĽ  y:âĽ  Ď  RAAâĽ  x:âĽ  uf 1  uf 1  Ď1  Ď2  Ď  x=y  Ď2  mon  Ď[y/x]  â  â  (b) A reduction for falsum-rules  y=z  Ď[z/x]  Ď3  Ď1  Ď3  mon  x=y y=z  mon  Ď  x=z  mon  Ď[z/x]  (c) Reduction for the rule mon  Figure 3. Examples of reductions  We will give concrete examples of derivations in the following sections. For simplicity, we will employ the rules for  conjunction â§ and disjunction â¨, which are derived from the basic propositional rules as is standard, as well as other derived  rules such as those for F, P, â, and â given in Figure 2.  Since the axiomatization of Kl given in Section 2.3 is sound and complete, we could prove in N (Kl) the axioms and  the rules of the axiomatization to establish the completeness of N (Kl) indirectly (and we do so in Section A.2.2). We can,  however, also give a direct proof of the soundness and completeness of N (Kl). In fact, by adapting standard proofs for  labeled systems (see, e.g., [8, 16, 19] and the detailed proofs in the appendix, which in particular extend those for modal  logics in [19] to the case of universal falsum and other general rules that mix derivations of lwffs and rwffs), we have:  Theorem 6 (Soundness and completeness of N (Kl)) N (Kl) = N (KlL ) + N (KlR ) + N (KlG ) is sound and complete,  i.e. we have that Î, â â˘ Ď iff Î, â |=M,Îť Ď for every model M and every interpretation Îť.  4 Normalization  4.1  Derivations in normal form  We will now show that the system N (Kl) possesses a number of useful normalization properties. To that end, we will  follow the classical normalization process of [14] as much as possible, while some adaptations are inspired by [19]. We begin  by simplifying the proofs by restricting the applications of some of the rules.  Lemma 7 If Î, â â˘ Ď, then there exists a derivation of Ď from (Î, â) where: (i) the conclusions of applications of RAAâĽ ,  RAAâ , and mon are atomic; (ii) mon is not applied to lwffs of the form x :âĽ.  The system obtained from N (Kl) by restricting the rules RAAâĽ , RAAâ , and mon according to this lemma is equivalent to  N (Kl). From now on, we will thus consider only this restricted system and keep calling it N (Kl).  The ND systems given in [19] for families of modal and relevance logics are based on a strict separation between the  labeled and the relational sub-systems (i.e. derivations of lwffs can depend on derivations of rwffs, but not vice versa). This  separation is possible thanks to the restriction to relational theories that are Horn theories. Our system N (Kl) does not allow  for such a separation, since the rules for universal falsum let relational derivations depend also on labeled ones. Thus, more  complex derivations are possible, which implies that with respect to [19] we need to consider more forms of detours and  hence more forms of reductions.  5  Definition 8 We say that a formula Ď is a maximal formula in a derivation when it is both the conclusion of an introduction  rule and the major premise of an elimination rule.  We define the notion of label position for labels occurring in a formula Ď to which the rule mon is applied. By the  restrictions of Lemma 7, Ď can have the form (i) x : p, (ii) x < y, or (iii) x = y. We say that x has label position 1 in (i),  (ii) and (iii), and y has label position 2 in (ii) and (iii).  A derivation is in pre-normal form (is a pre-normal derivation) if it has no maximal formulas and in every sequence of  mon applications, all the applications which concern variables with the same label position occur consecutively.  The notion of pre-normal derivation embodies the elimination of standard detours (given by a couple of introduction/elimination  rule applications on the same connective or operator) and an ordering of mon applications that aims at eliminating mon detours, i.e. two or more applications of mon which concern variables with the same label position. Note that, since mon  is only applied to atomic formulas of the form described above, once we have eliminated maximal formulas, the case of a  sequence of mon applications is the only case in which we can have this kind of detour.  Lemma 9 Every derivation in N (Kl) reduces to a derivation in pre-normal form.  Proof (Sketch) First, we iteratively apply proper reductions (an example is in Figure 3(a)) that remove maximal formulas.  Then the lemma follows by observing that applications of mon in a sequence can be permuted as shown in Figure 13 in the  appendix.  âŁ  Definition 10 We call falsum-rules the rules RAAâĽ , RAAâ , uf 1, and uf 2. We say that a formula Ď is a redundant formula  in a derivation when: (i) Ď is both the conclusion and the premise of a falsum-rule; or (ii) Ď is both the conclusion and the  major premise of a mon carrying out two substitutions in the same label position (see Figure 3(c)).  A derivation is in normal form (is a normal derivation) iff it is in pre-normal form and does not contain any redundant  formula.  Theorem 11 Every derivation in N (Kl) reduces to a derivation in normal form.  Proof (Sketch) By Lemma 9, every derivation reduces to a pre-normal derivation. Then we can apply permutative reductions (examples in Figure 3(b) â (c)) that remove redundant formulas. More details are given in the appendix.  âŁ  Normal derivations in N (Kl) have a well-defined structure that has a number of desirable properties. In particular, there  is an ordering on the application of the rules, which we can exploit to prove a subformula property for our system. To that  end, we adapt the standard definitions of subformula and track as follows:  Definition 12 B is a subformula of A iff (i) A is B; (ii) A is A1 â A2 and B is a subformula of A1 or A2 ; (iii) A is GA1  and B is a subformula of A1 ; or (iv) A is HA1 and B is a subformula of A1 . We say that y : B is a subformula of x : A iff  B is a subformula of A.  Ď2 is a subformula of Ď1 iff (i) Ď1 is Ď2 ; (ii) Ď1 is Ďâ˛1 â Ďâ˛â˛1 and Ď2 is a subformula of Ďâ˛1 or Ďâ˛â˛1 ; or (iii) Ď1 is âx. Ď and Ď2 is  a subformula of Ď.  Given a derivation Ď in N (Kl), a track in Ď is a sequence of formulas Ď1 , . . . , Ďn such that:  (i) Ď1 is an assumption of Ď, an axiom, or the conclusion of a universal falsum rule (uf 1 or uf 2);  (ii) Ďi stands immediately above Ďi+1 and is the major (or the only) premise of a rule for 1 â¤ i < n;  (iii) Ďn is the conclusion of Ď, the premise of a universal falsum rule, or the minor premise of a rule.  We call a track Ď1 , . . . , Ďn a labeled track when each Ďi is an lwff and a relational track when each Ďi is an rwff.  In other words, a track can only pass through the major premises of rules and it ends at the first minor premise of a rule, or  at an application of universal falsum, or at the conclusion of Ď. The following lemmas formalize properties of the structure  of the tracks and specify the way in which the tracks are linked one to each other.  Lemma 13 Let Ď be a normal derivation, and let t be a track Ď1 , . . . , Ďn in Ď. Then t consists of three (possibly empty)  parts: (1) an elimination part, (2) a central part, and (3) an introduction part (see Figure 4) where:  (i) each Ďi in the elimination part is the major premise of an elimination rule and contains Ďi+1 as a subformula;  (ii) each Ďj in the introduction part except the last one is the premise of an introduction rule and is a subformula of Ďj+1 ;  (iii) each Ďk in the central part is atomic and is the premise of a falsum-rule or the major premise of a mon;  (iv) the central part contains at most one application of falsum-rules;  (v) tracks originating from an application of uf 1 or uf 2 have an empty elimination part;  (vi) tracks ending in an application of uf 1 or uf 2 have an empty introduction part.  6  Elimination  Part:  Central  Part:  Introduction  Part:  âE, GE, HE  â E, âE  RAAâĽ , uf 1, mon  RAAâ , uf 2, mon  âI, GI, HI  â I, âI  Figure 4. The structure of a labeled track (left) and that of a relational track (right)  tl  tr  x<y  GE, HE  tl  tl  tr  tr  x=y  â uf 2  x :âĽ  mon  tl  CASE 1  tr  CASE 3  CASE 2  x :âĽ uf 1  â  CASE 4  Figure 5. Possible connections between labeled tracks tl and relational tracks tr  Lemma 14 Let tl be a labeled track and tr a relational track in a derivation Ď. Then tl and tr can be connected in one of  the following ways (shown in Figure 5):  (i) the last formula in tr is the minor premise of a GE or of a HE whose major premise is a formula in the elimination  part of tl ;  (ii) the last formula in tr is the minor premise of a mon whose major premise is a formula in the central part of tl ;  (iii) tr ends with an application of uf 2 and the conclusion of that application is the first formula in tl ;  (iv) tl ends with an application of uf 1 and the conclusion of that application is the first formula in tr .  Proof The statement follows trivially by observing that GE, HE, mon, uf 1, and uf 2 are the only rules that mix labeled  and relational formulas and that, by Lemma 13, such rules can be applied only in a specific part of a track.  âŁ  4.2  The subformula property  To prove a subformula property for N (Kl), we adapt further standard definitions:  Definition 15 Given a derivation Ď in N (Kl), the main thread is the sequence t1 , . . . , tn of tracks such that: (1) the first  formula in t1 is an assumption or an axiom; (2) ti and ti+1 are connected by means of an application of uf 1 or uf 2, for  1 â¤ i â¤ (n â 1); and (3) the last formula in tn is the conclusion of Ď.  Let Ď be a derivation of Ď from (Î, â) in N (Kl), SL be the set of subformulas of the formulas in Î (or in Î âŞ {Ď} if Ď  is a labeled formula), and SR be the set of subformulas of the formulas in â âŞ Ax (or in â âŞ Ax âŞ {Ď} if Ď is a relational  formula), where Ax is the set of axioms used in Ď. We say that Ď enjoys the subformula property iff  1. for all lwffs y : B used in the derivation Ď:  (i) B â SL ; or  (ii) B is an assumption D ââĽ discharged by an application of RAAâĽ where D â SL ; or  (iii) B is an occurrence of âĽ obtained by âE from an assumption D ââĽ discharged by an application of RAAâĽ ,  where D â SL ; or  (iv) B is an occurrence of âĽ obtained by an application of RAAâĽ that does not discharge any assumption; or  (v) B is an occurrence of âĽ obtained by an application of uf 2;  2. for all rwffs Ď used in the derivation Ď:  (i) Ď â SR ; or  (ii) Ď is an assumption Ď1 ââĽ discharged by an application of RAAâ where Ď1 â SR ; or  (iii) Ď is an occurrence of â obtained by â E from an assumption Ďâ˛ â â discharged by an application of RAAâ , where  Ďâ˛ â SR ; or  7  (iv) Ď is an occurrence of â obtained by an application of uf 1; or  (v) Ď is obtained by an application of mon.  Lemma 16 Every normal derivation in N (Kl) satisfies the subformula property.  Proof This follows immediately from the standard proof [14], which is based on the introduction of an ordering of the  tracks in a normal derivation depending on their distance from a main thread. In our case, a main thread contains not only  labeled formulas and we have to consider more cases than in the standard proof, given that the central part of a track can have  a more complex structure (as it can also contain applications of uf 1, uf 2, and mon).  âŁ  This lemma shows that although normal derivations in N (Kl) have a more complex structure than normal derivations in  ND systems for classical logic [14] and ND systems for families of modal and relevance logics [19], they have still a welldefined structure and satisfy a subformula property. It is important to remark that the special cases added to the definition of  subformula property (i.e. formulas can be derived by applications of uf 1, uf 2, or mon) do not compromise automatic proof  search completely, given that such cases can occur only in a limited section of a normal derivation (i.e. the central part of a  track).  We also note that the presence of axioms (and in particular the fact that they are expressed in a full first-order language)  makes our proof of normalization more complex and our results weaker. Thus, it is not possible to use it as a means to show  the consistency of the system or the validity of an interpolation theorem, as can be done for systems in [19], where relational  properties are expressed by Horn rules and we have only atomic axioms.  5 A family of tense logics  The basic linear tense logic Kl leaves unanswered many fundamental natural questions about the structure of time. However, the labeling framework allows us to express several further relational properties in a straightforward and clean way,  i.e. by only adding the corresponding relational axioms to the relational sub-system. In particular, we will now show how to  extend N (Kl) to capture the extensions of Kl with: a first/final point; unbounded time; dense time; and discrete time (where  we adopted the classification of [15]).5  Kl with a first/final point The semantics of Kl is given by means of temporal structures where nothing is said about the  existence of a first or a final point. To express the existence of such points, we can add the following axioms6 to the relational  sub-systems:  âx. ây. ÂŹ(y < x)  first  âx. ây. ÂŹ(x < y)  final .  The two axioms do not affect each other; thus we can decide to add both or just one of them to the system, according to the  logic we want to represent.  Soundness of the extended systems is straightforward, since the axioms mirror the properties that the models of the  extended logic are required to satisfy. To show completeness, it suffices to extend the canonical model construction presented  for N (Kl) (see Section A.2) to consider also the new relational axioms. Alternatively, we can simply prove completeness  by proving the corresponding (see, e.g., [18]) Hilbert-style axioms (having a first point) and (having a final point) that are  given in Figure 6. In Figure 7, we show the derivation for the first one (the proofs of the two axioms are symmetric). Also  the normalization procedure of Section 4 can still be applied to the extended system: we have just to consider the possibility  of more relational axioms.  Kl with unbounded time Conversely, we can express the fact that the sequence of time points is unbounded, towards the  past and/or towards the future. This corresponds to adding the conditions of seriality on the left and/or on the right, i.e. every  point has a predecessor and/or a successor. For this, we can add two relational axioms corresponding to the axioms for left  and right seriality given in Figure 6:  âx.ây. y < x  lser  âx.ây. x < y  rser .  5 It is worth to mention that in [6], Bonnette and GoreĚ give a labeled sequent system for the minimal tense logic Kt that can easily capture any combination  of the reflexive, transitive, euclidean, symmetric and serial extensions of the logic. We have not considered all of these properties of the accessibility relation  here, but the missing ones can be added straightforwardly thanks to the modularity of our system, which we exploit to capture the extensions towards LTL  we consider in the remainder of the paper. The labeling discipline of [6] is different from ours and is tailored to a lean Prolog implementation of their sequent  systems. In contrast, we focus here on the proof-theoretical aspects of our ND systems and leave an implementation for future work.  6 The existence of a first (or a final) point is often expressed by adding a constant to the language. For example, we could introduce a constant 0 for the  first point and an axiom stating that ây. ÂŹ(y < 0). We prefer not to modify the language and keep the treatment of this property closer to that of other ones.  8  H âĽ â¨ PH âĽ  G âĽ â¨ FG âĽ  Pâ¤  Fâ¤  (having a first point)  (having a final point)  (left-seriality)  (right-seriality)  PA â PPA  FA â FFA  (Pâ¤ â§ A â§ GA) â (PGA)  (Fâ¤ â§ A â§ HA) â (FHA)  (left-density)  (right-density)  (left-discreteness)  (right-discreteness)  Figure 6. Some axioms for extensions of Kl  conn  âx.y. x<yâx=yây<x  ây. t<yât=yât<x  âE  ÂŹ(t<s)  âE  t<sât=sâs<t  first  [ây. ÂŹ(y<s)]2  âE  [t<s]3  ÂŹE  â  â  â  âx.ây. ÂŹ(y<x)  Ď2  â  â  âE 4  âE 3  âE 2  â  uf 2  t:âĽ  RAAâĽ 1  t:HâĽâ¨PHâĽ  where Ď1 is:  and Ď2 is:  [ây. ÂŹ(y<s)]2  [t:Pâ¤â§HPâ¤]1  ÂŹ(t:Pâ¤)  Ď1  [t=sâs<t]3  ÂŹ(q<s)  â§E  [t=s]  4  âE  â  mon  (s:Pâ¤)  s:âĽ  s:âĽ  [ây. ÂŹ(y<s)]2  [q<s]5  [t:Pâ¤â§HPâ¤]1  ÂŹE  t:HPâ¤  uf 2  ÂŹ(r<s)  â§E  [s<t]  4  âE  â  HE  s:Pâ¤  PE 5  s:âĽ  s:âĽ  uf 1  [r<s]6  ÂŹE  uf 2  PE 6  uf 1  â  â  Figure 7. Derivation of the modal axiom for first point  As an example, we show completeness for (right-seriality), where Ď is some proof of s : â¤ based on a proof of â¤ or Aâ¨ âź A  in classical logic (see, e.g., [14, 17]):  âx.ây. x < y  ây. t < y  Ď  s:â¤  rser  âE  [t < s]1  FI  t : Fâ¤  t : Fâ¤  âE  1  Kl with dense time Another constraint that we can impose on relational structures is that the flow of time is dense, i.e. between any two points we can find a third point:  âx.y. x < y â âz. x < z â z < y  dens .  Figure 11 in the appendix shows the proof of the axiom for (right-density); the proof for (left-density) can be obtained in a  symmetric way by using the same axiom (dens).  Kl with discrete time  Finally, we can express discreteness both towards the past and towards the future:  âx.y. x < y â âz. z < y â ÂŹâu. (z < u â u < y)  âx.y. x < y â âz. x < z â ÂŹâu. (x < u â u < z)  ldiscr  rdiscr .  We omit the proof of completeness for the corresponding axioms.  6 Towards LTL  We have seen that ND systems for several extensions of Kl can be given by extending the âbase systemâ N (Kl). This is  not the case for all the possible extensions, however, as some properties, e.g. continuity or finite intervals, are second-order  properties [18] and thus require an appropriate higher-order relational language. We now briefly discuss whether (and how)  it is possible to extend N (Kl) to capture a richer logic like (fragments of) LTL.  9  MTL: a subset of LTL For brevity, we restrict our attention to future temporal operators only (but the extension to the  past is straightforward) and begin by considering the system N (Kl) extended with the axioms rdiscr and rser so that the  flow of time is discrete and unbounded towards the future (in this case, the presence of rser allows us to simplify rdiscr  to âx. âz. x < z â ÂŹâu. (x < u â u < z)). We can express in our syntax the relation next in terms of the relation < (see,  e.g., [10]), i.e. we can introduce a relational symbol âł (with the meaning of immediately precedes) as an abbreviation:  s âł t âĄ s < t â âx. ÂŹ(s < x) â ÂŹ(x < t) .  This allows us to enrich the language with an operator X, whose semantics can be given without having to introduce a specific  relation for it in the definition of a model. We just need to require that models for this logic are Kl models where < is also  discrete and serial on the right, and extend the definition of truth with:  |=M,Îť x : XA  iff  |=M,Îť x âł y  and  |=M,Îť y : A .  Rules for introduction and elimination of X can now be given in a clean way, with the usual freshness proviso for XI:7  [x âł y]  .  ..  .  y:A  XI (y fresh)  x : XA  x : XA x âł y  XE .  y:A  The logic that we capture in this extended system, which we call N (KMTL ), is not LTL yet. We are able to express the  existence of an immediate successor, but we miss a way to say that between any two points (related by âş) there can be only a  finite sequence of points related one to each other by the relation next. We would need to express the finite interval property,  but this is a second-order property, as observed above.  In [12], a subset of LTL called Small Temporal Logic, or STL for short, is introduced and given a natural deduction system.  The reasons behind the definition of STL are the difficulties arising from dealing with the induction principle (relating âł  and <) that is needed in order to represent LTL. While the semantics of LTL can be given by considering Kripke structures  defined over a relation of successor (denoted by N ) and by defining âş as the least transitive closure of N , in the semantics  of STL the relation âş is just required to contain N . It follows that a rule for induction is not needed in a system for STL.  It is easy to verify that N (KMTL ) is complete with respect to the semantics of STL. Moreover, it can be proven to  correspond to a logic âlargerâ than STL for which the condition of linearity (or connectedness) on the relation âş holds:  we call this logic Medium Temporal Logic MTL.8 We could also introduce rules for the operators since and until, but they  would be quite complex and problematic from a proof-theoretical point of view; see [2] for a labeled tableaux system for a  distributed temporal logic that comprises full LTL, and [5] for tableaux-like ND rules for LTL.  LTL Several systems of labeled natural deduction for LTL, e.g. [4, 5, 12], introduce an induction rule like the following  [x < xâ˛ ][xâ˛ âł xâ˛â˛ ][xâ˛ : A]  ..  ..  â˛â˛  x  :A  x:A x<y  ind  y:A  which does not operate at a purely relational level. Some remarks are worth about a solution like this. First of all, the rule ind  adds some more points of contact between the labeled and the relational sub-systems and leads to a failure of normalization.  Moreover, one can show that the axiom of connectedness is not needed anymore since it is in a way âcontainedâ in the  induction principle. In fact, the axiom (3)  âź G(GA â B) â G(GB â A)  of weak connectedness must obviously hold in LTL, for it can be subsumed by the induction axiom (see, e.g., [9]). Thus, in  the case we want to use a rule like ind to capture LTL, it seems more reasonable to follow a different approach that avoids  7 The fact that every time point has one (and only one) immediate successor follows from right-discreteness, right-seriality, and connectedness, and it  allows one to express rules for X both in a universal and in an existential formulation. We give here the universal one.  8 An axiomatization of MTL can be obtained, as shown in [10], by adding the following axioms to those given for future-time Kl:  (KX )  X(A â B) â (XA â XB)  (FUNC ) (X âź A â âź XA) â§ ( âź XA â X âź A)  (RECG ) (GA â X(A â§ GA)) â§ (X(A â§ GA) â GA)  10  both the extension of the relational language to a first-order language and the introduction of the universal falsum. In other  words, we could have a system for LTL which uses only Horn rules in the relational theory (from which it follows that we  have only atomic rwffs and no relational falsum) but extends the labeled sub-systems with a rule for induction that mixes  labeled and relational premises.  7 Conclusions  We have already discussed some works that are related to the labeled ND systems for tense logics that we have given here  (for which, summarizing, we have proved not only soundness and completeness, but also a number of useful proof-theoretical  properties, and for which we also discussed extensions leading up to LTL). As we observed, the main difficulties in applying  the labeled deduction framework in the context of linear temporal logics arise from the need of expressing the condition of  connectedness in the case of the basic linear tense logic Kl (see [11] for a discussion) and the induction principle in the  case of LTL. In fact, [11] gives a fairly complex labeled tableaux system for the logic Kl (called there the linear temporal  logic Kt4.3), which is analytical in that it only comprises elimination rules for temporal operators and can be used as a  decision procedure. In contrast, the main distinctive feature of our approach is the extension of a fixed base system for the  temporal operators with relational rules that express the relational properties of the considered logic. This, in particular,  allows for uniform and modular proofs of meta-theoretic properties for families of logics, like the proofs we have given here.  Moreover, it makes our systems amenable to extensions to other logics as we have begun investigating towards LTL and  to the branching-time logics CTL and CTLâ . To that end, we plan to capitalize on the labeled ND systems for LTL given  in [4, 12], which both make use of a specific rule for induction.  References  [1] A. R. Anderson, N. D. Belnap, Jr., and J. M. Dunn. Entailment, The Logic of Relevance and Necessity, volume 2. Princeton University  Press, Princeton, New Jersey, 1992.  [2] D. Basin, C. Caleiro, J. Ramos, and L. ViganoĚ. A Labeled Tableaux System for the Distributed Temporal Logic DTL. In Proceedings  of TIMEâ08, IEEE Computer Society Press, 2008.  [3] D. Basin, M. DâAgostino, D. M. Gabbay, S. Matthews, and L. ViganoĚ, editors. Labelled Deduction. Kluwer Academic Publishers,  Dordrecht, 2000.  [4] A. Bolotov, A. Basukoski, O. Grigoriev, and V. Shangin. Natural deduction calculus for linear-time temporal logic. In M. Fisher,  W. van der Hoek, B. Konev, and A. Lisitsa, editors, Proceedings of JELIAâ06, LNCS 4160, pages 56â 68. Springer, 2006.  [5] A. Bolotov, O. Grigoriev, and V. Shangin. Automated natural deduction for propositional linear-time temporal logic. In Proceedings  of TIMEâ07, pages 47â58. IEEE Computer Society Press, 2007.  [6] N. Bonnette and R. GoreĚ. A labelled sequent system for tense logic kt . In J. Fenstad, editor, Proceedings of the Australian Joint  Conference on Artificial Intelligence, LNAI 1502, pages 71â82. Springer-Verlag, 1998.  [7] M. DâAgostino, D. Gabbay, R. Hahnle, and J.Posegga, editors. Handbook of Tableau Methods. Kluwer Academic Publishers, 1999.  [8] D. Gabbay. Labelled Deductive Systems. Clarendon Press, 1996.  [9] R. I. Goldblatt. Logics of Time and Computation. CSLI Lecture Notes, 1987.  [10] V. Goranko. Temporal logics of computations. Manuscript, 2000.  [11] A. Indrzejczak. A labelled natural deduction system for linear temporal logic. Studia Logica, 11(75):345â376, 2003.  [12] D. Marchignoli. Natural Deduction Systems for Temporal Logics. PhD thesis, Dipartimento di Informatica, UniversitaĚ di Pisa,  February 2002.  [13] E. OrĹowska. Relational proof systems for modal logics. In H. Wansing, editor, Proof Theory of Modal Logic, pages 55â78. Kluwer  Academic Publishers, 1996.  [14] D. Prawitz. Natural Deduction: a Proof-Theoretical Study. Number 3 in Stockholm Studies in Philosophy. Almquist and Wiskell,  1965.  [15] N. Rescher and A. Urquhart. Temporal Logic. Springer-Verlag, 1971.  [16] A. Simpson. The Proof Theory and Semantics of Intuitionistic Modal Logic. PhD thesis, College of Science and Engineering, School  of Informatics, University of Edinburgh, 1994.  [17] A. Troelstra and H. Schwichtenberg. Basic Proof Theory. Cambridge University Press, 2000.  [18] Y. Venema. Temporal logic. In L. Goble, editor, The Blackwell Guide to Philosophical Logic, pages 203â223. Blackwell Publishers,  Malden, USA, 2001.  [19] L. ViganoĚ. Labelled Non-Classical Logics. Kluwer Academic Publishers, 2000.  11  A Proofs  In this appendix we give the full proofs of the lemmas and theorems given in the body of the paper. In Sections A.1  and A.2, we give the proofs for the soundness and completeness of the system N (Kl) (Theorem 6) and for the completeness  of the extensions of N (Kl) (Section 5). In Section A.3, we give proofs for the normalization results presented in Section 4.  A.1  Soundness  Theorem 17 N (Kl) = N (KlL ) + N (KlR ) + N (KlG ) is sound, i.e. it holds:  (i) Î, â â˘ Ď implies Î, â |=M,Îť Ď for every model M and every interpretation Îť;  (ii) Î, â â˘ x : A implies Î, â |=M,Îť x : A for every model M and every interpretation Îť.  Proof  (i) The proof is by induction on the structure of the derivation of Ď. The base case is when Ď â â and is trivial. There  is one step case for every axiom or rule. The axioms conn, trans <, and irrefl < directly refer to the properties of  connectedness, transitivity, and irreflexivity of Kl models (Definition 3) and thus are trivially sound, while refl = and  mon preserve soundness by definition of |=M,Îť x = y (Definition 4).  Consider the case of an application of RAAâ  Î â [Ďââ]1  Ď  â  Ď  RAA1â  where â1 = â âŞ {Ď â â}. By the induction hypothesis, Î, â1 |=M,Îť â for every model M and every interpretation Îť.  Let us consider an arbitrary model M and an arbitrary interpretation Îť; we assume |=M,Îť (Î, â) and prove |=M,Îť Ď.  Since 2M,Îť â, from the induction hypothesis we obtain 2M,Îť (Î, â1 ), that, given the assumption |=M,Îť (Î, â), leads  to 2M,Îť Ď â â, i.e. |=M,Îť Ď and 2M,Îť â by Definition 4.  The cases for â I, â E, âI and âE follow by simple adaptations of the standard proofs for classical logic.  Finally, consider the case of an application of uf 1  Îâ  Ď  x:âĽ  uf 1  â  for a proof context (Î, â) and some label x. By the induction hypothesis, we have Î, â |=M,Îť x :âĽ for every M and  every Îť. Given a generic model M and a generic interpretation Îť, we can write 2M,Îť x :âĽ; it follows that 2M,Îť (Î, â)  and then also Î, â |=M,Îť â by Definition 4.  (ii) As in (i), by induction on the structure of the derivation of x : A. The base case is trivial and there is a step case for  every rule of the labeled system. The cases of introduction and elimination of connectives and that of universal falsum  are as in (i).  Consider an application of the rule GI  Î â [x<y]1  Ď  y:A  x:GA  GI 1  where Î, â1 â˘ y : A with y fresh and with â1 = â âŞ {x < y}. By the induction hypothesis, for every model M and  every interpretation Îť it holds Î, â |=M,Îť y : A. We let Îť be any interpretation such that |=M,Îť (Î, â) and show that  |=M,Îť x : GA. Let w be any world such that Îť(x) âş w. Since Îť can be trivially extended to another interpretation (still  called Îť for simplicity) by setting Îť(y) = w, the induction hypothesis yields |=M,Îť y : A, and thus |=M,Îť x : GA.  12  Finally, consider an application of the rule GE  Î1 â1  Î2 â2  Ď1  Ď2  x:GA  x<y  GE .  y:A  Let M be an arbitrary model and Îť an arbitrary interpretation. If we assume |=M,Îť (Î1 âŞ Î2 , â1 âŞ â2 ), then from the  induction hypotheses we obtain |=M,Îť x : GA and |=M,Îť x < y, and thus |=M,Îť y : A by Definition 4.  The treatment of HI and HE is analogous.  âŁ  A.2  Completeness  In the following, in order to simplify the derivations, we will use some derived rules. We show here, as an example, how  to derive the rules FI and FE (see Figure 2) from the rules for introduction/elimination of G. We remind that the following  equivalence holds: FA âĄ âź G âź A âĄ (G(A ââĽ)) ââĽ.  The rule  y:A  x<y  FI  x:FA  can be derived as follows  [x:G(AââĽ)]1  x<y  GE  y:AââĽ  y:A  y:âĽ  âE  RAAâĽ  x:âĽ  âI 1  x:G(AââĽ)ââĽ  while an application of FE  [y:A] [x<y]  Ď  x:FA  z:B  FE  z:B  can be replaced by the following derivation  [y:A]3 [x<y]2  Ď  [z:BââĽ]1  z:B  z:âĽ  y:âĽ  y:AââĽ  x:G(AââĽ)ââĽ  x:G(AââĽ)  x:âĽ  z:B  âE  RAAâĽ  âI 3  GI 2  âE  RAAâĽ 1  A.2.1 Completeness by canonical model construction  In the following, slightly abusing notation, we will write Ď â (Î, â) whenever Ď â Î or Ď â â, and write x â (Î, â)  whenever the label x occurs in some Ď â (Î, â).  Definition 18 A proof context (Î, â) is N (Kl)-consistent iff Î, â 0 x :âĽ for every x, and it is N (Kl)-inconsistent  otherwise.  Note that we can have inconsistency also by deriving â in the relational system; given the rules uf 1 and uf 2 for universal  falsum, also this case is captured by the previous definition.  For simplicity, in the following we will omit the âN (Kl)â and simply speak of consistent and inconsistent proof contexts.  13  Proposition 19 Let (Î, â) be a consistent proof context. Then:  (i) for every x and every A, either (Î âŞ {x : A}, â) is consistent or (Î âŞ {x : âź A}, â) is consistent;  (ii) for every relational formula Ď , either (Î, â âŞ {Ď}) is consistent or (Î, â âŞ {ÂŹĎ}) is consistent.  Proof  (i) Suppose that both (Î âŞ {x : A}, â) and (Î âŞ {x : âź A}, â) are inconsistent. Then from Î âŞ {x : A}, â â˘ x :âĽ, by  applying the rule âI, we get Î, â â˘ x : âź A. Similarly, from Î âŞ {x : âź A}, â â˘ x :âĽ, by applying the rule RAAâĽ ,  we get Î, â â˘ x : A.  But, if both x : A and x : âź A are derivable in the proof context (Î, â), then it also holds Î, â â˘ x :âĽ, by âź E. It  follows that the original proof context (Î, â) had to be inconsistent (contradiction).  (ii) The proof for the relational case is analogous and is obtained by using the corresponding relational rules i.e. â I, RAAâ  and ÂŹE.  âŁ  Definition 20 A proof context (Î, â) is maximally consistent iff the following three conditions hold:  1. (Î, â) is consistent,  2. for every relational formula Ď, either Ď â â or ÂŹĎ â â,  3. for every x and every A, either x : A â Î or x : âź A â Î.  Completeness follows by a Henkinâstyle proof, where a canonical model  MC = (W C , âşC , V C )  C  C  is built from a proof context (Î, â) to show that (Î, â) 0 Ď implies Î, â 2M ,Îť Ď for every formula Ď.  In standard proofs for unlabeled modal, temporal, and for other non-classical logics, the set W C is obtained by progressively building maximally consistent sets of formulas, where consistency is locally checked within each set. In our case,  given the presence of lwffs and rwffs, we modify the Lindenbaum lemma to extend (Î, â) to one single maximally consistent context (Îâ , ââ ), where consistency is âgloballyâ checked also against the additional assumptions in â.9 The elements  of W C are then built by partitioning Îâ and ââ with respect to the labels, and the relation âşC between the worlds is defined  by exploiting the information in ââ .  In the Lindenbaum lemma for predicate logic, a maximally consistent and Ď-complete set of formulas is inductively built  by adding for every formula âź âx. A a witness to its truth, namely a formula âź A[c/x] for some new individual constant  c. This ensures that the resulting set is Ď-complete, i.e. that if, for every closed term t, A[t/x] is contained in the set, then  so is âx. A. A similar procedure applies here not only for rwffs ÂŹâx. Ď, but also in the case of lwffs of the form x : âź GA.  That is, together with x : âź GA we consistently add y : âź A and x < y for some new y, which acts as a witness world to  the truth of x : âź GA. This ensures that the maximally consistent context (Îâ , ââ ) is such that if x < z â (Îâ , ââ ) implies  z : B â (Îâ , ââ ) for every z, then x : GB â (Îâ , ââ ), as shown in Lemma 22 below. Note that in the standard completeness  proof for unlabeled modal logics, for instance, one instead considers a canonical model MC and shows that if W1 â W C  and MC , W1  âź GA, then W C also contains a world W2 accessible from W1 that serves as a witness world to the truth of  âź GA at W1 , i.e. MC , W2  âź A.  Lemma 21 Every consistent proof context (Î, â) can be extended to a maximally consistent proof context (Îâ , ââ ).  Proof We first extend the language of N (Kl) with infinitely many new constants for witness terms and for witness worlds.  Let t range over the original terms, s range over the new constants for witness terms, and r range over both; further, let w  range over labels, v range over the new constants for witness worlds, and u range over both. All these may be subscripted.  Let Ď1 , Ď2 , ... be an enumeration of all lwffs and rwffs in the extended language; when Ďi is u : A, we write âź Ďi for  u : âź A.  We iteratively build a sequence of consistent proof contexts by defining (Î0 , â0 ) = (Î, â) and (Îi+1 , âi+1 ) to be:  9 We consider only consistent proof contexts. If (Î, â) is inconsistent, then Î, â â˘ Ď for all Ď, and thus completeness immediately holds for all lwffs  and rwffs.  14  â˘ (Îi , âi ), if (Îi âŞ {Ďi+1 }, âi ) is inconsistent; else  â˘ (Îi âŞ {u : âź GA, v : âź A}, âi âŞ {u < v}) for a v not occurring in (Îi âŞ {u : âź GA}, âi ) if Ďi+1 is u : âź GA; else  â˘ (Îi âŞ {u : âź HA, v : âź A}, âi âŞ {v < u}) for a v not occurring in (Îi âŞ {u : âź HA}, âi ) if Ďi+1 is u : âź HA; else  â˘ (Îi , âi âŞ {ÂŹâx. Ď, ÂŹĎ[s/x]}) for an s not occurring in (Îi , âi âŞ {ÂŹâx. Ď}) if Ďi+1 is âź âx. Ď; else  â˘ (Îi âŞ {Ďi+1 }, âi ) if Ďi+1 is an lwff or (Îi , âi âŞ {Ďi+1 }) if Ďi+1 is an rwff.  Now define  (Îâ , ââ ) = (  [  Îi ,  iâĽ0  [  âi ) .  iâĽ0  We show that the proof context (Îâ , ââ ) is maximally consistent, i.e. it verifies the three conditions of Definition 20.  (i) First we prove that our construction preserves consistency by showing that every (Îi , âi ) is consistent. The only  interesting cases are when Ďi+1 is one of âź GA, âź HA, or ÂŹâx. Ď. We only consider the first case, since the second  one is symmetrical, and the third is very similar.  If (Îi âŞ {u : âź GA}, âi ) is consistent, then so is (Îi âŞ {u : âź GA, v : âź A}) for a v not occurring in (Îi âŞ {u : âź  GA}, âi ). By contraposition, suppose that  Îi âŞ {u : âź GA, v : âź A} , âi âŞ {u < v} â˘ uj :âĽ  by a derivation Ď (where v does not occur in (Îi âŞ {u : âź GA}, âi )). Then in N (Kl) we can have a derivation like the  following:  Îi  âi  [v: âźA]1  u: âźGA  [u<v]2  Ď  uj :âĽ  v:A  u:GA  RAAâĽ 1  GI 2  u: âźGA  u:âĽ  âźE  This shows that (Îi âŞ {u : âź GA}, âi ) is inconsistent, which is not the case.  (ii) Consider an rwff Ď. Suppose that both Ď â  / ââ and ÂŹĎ â  / ââ hold. Let Ď be Ďi+1 for some i in our enumeration of  formulas and ÂŹĎ be Ďj+1 . Now suppose i < j (the other case is symmetric). Ď â  / ââ implies that (Îi , âi âŞ {Ďi+1 })  is inconsistent. Given that in our inductive construction we only add formulas to the proof context, i.e. âi â âj , we  have that (Îj , âj âŞ {Ďi+1 }) is also inconsistent. Then, by Proposition 19(ii), (Îj , âj âŞ {Ďj+1 }) has to be consistent  and Ďj+1 is added by definition to âj . This implies Ďj+1 â ââ , i.e. ÂŹĎ â ââ .  (iii) The proof for labeled formulas is the same as in the previous case and proceeds by contraposition by using Proposition  19(i).  âŁ  Lemma 22 Let (Î, â) be a maximally consistent proof context. Then:  (i) Î, â â˘ Ď iff Ď â (Î, â);  (ii) Ď1 â Ď2 â â iff Ď1 â â implies Ď2 â â;  (iii) âx. Ď â â iff Ď[y/x] â â for all y;  (iv) u : A â B â Î iff u : A â Î implies u : B â Î;  (v) u1 : GA â Î iff u1 < u2 â â implies u2 : A â Î for all u2 ;  (vi) u1 : HA â Î iff u2 < u1 â â implies u2 : A â Î for all u2 .  Proof We treat only some cases, the others are similar and follow by maximality and consistency of (Î, â).  15  (i) The proof is analogous for rwffs and lwffs, we see the first case.  (â) If Ď â (Î, â), then trivially Î, â â˘ Ď.  (â) Consider an rwff Ď such that Ď â  / (Î, â). Then, by Definition 20, ÂŹĎ â (Î, â). It follows trivially that Î, â â˘ ÂŹĎ  holds. By hypothesis, Î, â â˘ Ď and thus by using ÂŹE we get Î, â â˘ â, that contradicts the consistency of (Î, â).  (v) (â) Suppose u1 : GA â  / Î and u2 : A â Î for every u2 such that u1 < u2 â â. Then, by maximality of (Î, â),  u1 : âź GA â Î. Now suppose there exists a u3 such that u1 < u3 â â and u3 : âź A â Î. Then, by hypothesis, we  know u3 : A â Î and this leads to a contradiction. Otherwise, if such a u3 does not exist, we can conclude u1 : GA â Î  that leads to a contradiction as well.  (â) We show it by contraposition. Suppose u1 : GA â Î, u1 < u2 â â and u2 : A â  / Î. By maximality of (Î, â),  we have u2 : âź A â Î. Then the following is an N (Kl) proof that shows (Î, â) is inconsistent.  u1 :GA  u1 <u2  GE  u2 : âźA  u2 :A  u:âĽ  âźE  âŁ  Our construction of maximally consistent proof contexts (Lemma 21) does not exclude the presence of two labels x and  y that are related by the relation x = y. Now we want to derive a model from such a construction. Since we know from  Definition 4 that |=M,Îť x = y holds only if Îť(x) = Îť(y), we need to state an equivalence relation between labels on which  the function Îť can be defined.  Definition 23 Let C = (Î, â) be a maximally consistent proof context and LC the set of labels occurring in it, we define  the binary relation âĄC on LC as follows: for every u1 , u2 â LC ,  u1 âĄC u2  iff  u1 = u2 â â.  Proposition 24 Given a maximally consistent proof context C, the relation âĄC is an equivalence relation.  Proof  It follows trivially by the maximality of C and by the rules refl =, mon, irrefl < and conn.  âŁ  Notation 25 It follows from Proposition 24 that every maximally consistent proof context C determines a partition of the set  LC of labels occurring in it. In the following, we will also use the notation [u]C to indicate the equivalence class containing  the label u, i.e.  [u]C = {uâ˛ | u âĄC uâ˛ }.  Definition 26 Let C = (Î, â) be a maximally consistent proof context and LC be the set of labels occurring in it. We define  the canonical model MC = (W C , âşC , V C ) as follows:  â˘ W C = {[u]C | u â LC };  â˘ ([ui ]C , [uj ]C ) â âşC iff ui < uj â â;  â˘ V C ([u]C , p) = 1 iff u : p â Î.  We define the canonical interpretation ÎťC : LC â W C as follows:  ÎťC (u) = [u]C for every u â LC .  Remark 27 Note that in the previous definition âşC and V C are well defined, since it is easy to verify that for every u1 , u2 â  LC it holds:  â˘ u1 âĄC u2 implies for every u3 â LC , u1 < u3 â â iff u2 < u3 â â;  â˘ u1 âĄC u2 implies for every u3 â LC , u3 < u1 â â iff u3 < u2 â â;  â˘ u1 âĄC u2 implies for every p â P, u1 : p â Î iff u2 : p â Î.  16  âx.y. x<yâx=yây<x  x<yâx=yây<x  [x<y]2  conn  [x<yâx=y]  1  âE  [x=y]2  ÂŹ(x<y)  ÂŹE  â  ÂŹ(x=y)  ÂŹE  â  âE  â  [y<x]1  2  ÂŹ(y<x)  ÂŹE  â  âE  â  1  Figure 8. Proof for connectedness of canonical models  Proposition 28 Given a maximally consistent proof context C = (Î, â), the canonical model MC is a Kripke model for  Kl .  Proof It suffices to show that MC is irreflexive, transitive and connected.  Suppose there exist three worlds W1 , W2 , and W3 in W C such that (W1 , W2 ) ââşC and (W2 , W3 ) ââşC , but (W1 , W3 ) ââş  / C.  By definition 26, this implies there exist at least three labels x, y and z such that Îť(x) = W1 , Îť(y) = W2 , Îť(z) = W3 ,  x < y â â and y < z â â, but x < z â  / â, i.e. by the maximality of C, ÂŹ(x < z) â â. But this leads to the inconsistency  of (Î, â), as shown by the following derivation.  trans<  âx.y.z. (x<yây<z)âx<z  âE  x<y  y<z  x<yây<z  (x<yây<z)âx<z  âI  âE  x<z  ÂŹ(x<z)  â  ÂŹE  Connectedness of MC can be proved in a similar way by using the rule conn. Suppose there exist two distinct worlds  W1 and W2 in W C such that (W1 , W2 ) ââş  / C and (W2 , W1 ) ââş  / C . By definition 26, this implies there exist at least two  labels x and y such that Îť(x) = W1 , Îť(y) = W2 , x = y â  / â, x < y â  / â and y < x â  / â, i.e. by the maximality of C,  ÂŹ(x = y) â â, ÂŹ(x < y) â â and ÂŹ(y < x) â â. But this leads to the inconsistency of (Î, â), as shown by the derivation  in Figure 8.  Irreflexivity of MC can be shown in a similar way.  âŁ  Lemma 29 Let C = (Î, â) be a maximally consistent proof context, MC the canonical model and ÎťC the canonical  interpretation built on C as in Definition 26. Then:  C  (i) Ď â â iff Î, â |=M  ,ÎťC  C  (ii) u : A â Î iff Î, â |=M  Ď;  ,ÎťC  u : A.  Proof  C  (i) (â) By hypothesis, Ď â â. Then, if we assume |=M  C  ,ÎťC  C  (Î, â), it immediately follows |=M  ,ÎťC  Ď.  C  (â) By hypothesis, Î, â |=M ,Îť Ď. Let us suppose Ď â  / â. By maximality of (Î, â), it follows ÂŹĎ â â. Then we  C  C  C  C  have also Î, â |=M ,Îť ÂŹĎ (see direction (â)). But, since we have by hypothesis Î, â |=M ,Îť Ď, this yields the  C  C  absurd Î, â |=M ,Îť â.  (ii) The proof for labeled formulas is analogous.  âŁ  Theorem 30 N (Kl) = N (KlL ) + N (KlR ) + N (KlG ) is complete, i.e. it holds:  C  (i) if Î, â 0 w : A , then there exist a Kl model MC and an interpretation ÎťC such that Î, â 2M  C  (ii) if Î, â 0 Ď , then there exist a Kl model MC and an interpretation ÎťC such that Î, â 2M  Proof  17  ,ÎťC  ,ÎťC  Ď.  w : A;  trans<  âx.y.z. (x<yây<z)âx<z  âE  ây.z. (t<yây<z)ât<z  âE  âz. (t<sâs<z)ât<z  [t<s]2  âE  [t:GA]1  [s<r]3  t<s â s<r  (t<sâs<r)ât<r  t<r  âI  âE  GE  r:A  GI 3  s:GA  GI 2  t:GGA  t:GAâGGA  âI 1  Figure 9. Derivation of the axiom (G3 )  (i) If Î, â 0 w : A, then (Î âŞ {w : âź A}, â) is consistent; otherwise there exists a wi such that Î âŞ {w : âź A}, â â˘ wi :âĽ,  and then Î, â â˘ w : A. Therefore, by Lemma 21, (Î âŞ {w : âź A}, â) is included in a maximally consistent proof  context C = ((Î âŞ {w : âź A})â , ââ ). Let MC be the canonical model for C. It suffices to find an interpretation  C  C  according to which MC is not a model for w : A. By Lemma 29, (Î âŞ {w : âź A})â , ââ |=M ,Îť w : âź A, where  C  C  C  C  MC is a Kl model by Proposition 28. It follows Î âŞ {w : âź A})â , ââ 2M ,Îť w : A, and thus Î, â 2M ,Îť w : A.  (ii) We can repeat the same proof for relational formulas. If Î, â 0 Ď, then (Î, â âŞ {ÂŹĎ}) is consistent. Then we can build  C  C  C  C  a maximally consistent proof context Îâ , (â âŞ {ÂŹĎ})â such that Îâ , (â âŞ {ÂŹĎ})â 2M ,Îť Ď, and thus Î, â 2M ,Îť Ď.  âŁ  A.2.2 Completeness by axioms  It is possible to give an indirect proof of completeness by showing that all the axioms listed in Section 2.3 for the logic Kl  are derivable in N (Kl). In the following derivations, for simplicity, we will sometimes use derived operators and derived  rules, and exploit trivial equivalences between formulas implicitly.  We begin by giving derivations for the axioms (G1) and (G2 ):  [t:G(AâB)]1  [t<s]3  [t:GA]2  [t<s]3  GE  GE  s:AâB  s:A  s:B  t:GB  âE  GI 3  âI 2  t:GAâGB  âI 1  t:G(AâB)â(GAâGB)  [s:GA]2  [t:PGA]1  [s<t]2  t:A  t:A  t:PGAâA  GE  PE 2  âI 1  The derivation for (G3 ) is shown in Figure 9, while the derivation for (G4 ) is in Figure 10. We omit here the derivations for  the symmetric axioms (H1 )-(H4 ).  Completeness of the extended systems considered in Section 5 can be also proved by deriving the corresponding axioms.  In Section 5, we have already proved the axioms for having a first point and right-seriality. We show the derivations for  right-density and for right-discreteness in Figure 11 and Figure 12, respectively. Derivations of the other axioms (final point,  left-seriality, left-density, left-discreteness) are symmetric and we thus omit them.  A.3  Normalization  Proof [Lemma 7]  (i) We show that any application of RAAâĽ , RAAâ , and mon with a non-atomic conclusion can be replaced with a derivation  in which such rules are applied only to formulas of smaller grade by the set of transformations given below. By iterating  18  conn  âx.y. x<yâx=yây<x  ây. s<yâs=yây<s  s<râs=râr<s  [t:F âźAâ§F âźB]  [t:F âźAâ§F âźB]2  t:F âźA  Ď1  âE  t:âĽ  Ď2  Ď3  â  â  âE 8  â  âE  â  â§E  5  uf 2  t:âĽ  t:âĽ  [s=râr<s]5  â  2  t:F âźB  â§E  âE  FE 4  FE 3  RAAâĽ 2  t:GAâ¨GB  âI 1  t:(G(Aâ¨B)â§G(Aâ¨GB)â§G(GAâ¨B))â(GAâ¨GB)  where Ď1 is:  [t:(G(Aâ¨B)â§G(Aâ¨GB)â§G(GAâ¨B))]1  â§E  t:G(Aâ¨GB)  [t<s]3  [s: âźA]3  âźE  s:âĽ  s:âĽ  [s: âźGB]6  [s:A]7  GE  (s:Aâ¨GB)  [s:GB]7  s:âĽ  âźE  â¨E 7  RAAâĽ 6  s:GB  [s<r]5  [r: âźB]4  GE  r:B  r:âĽ  âźE  uf 1  â  Ď2 is:  [t:(G(Aâ¨B)â§G(Aâ¨GB)â§G(GAâ¨B))]1  â§E  t:G(Aâ¨B)  [s: âźA]3  [t<s]3  GE  s:Aâ¨B  [s:A]12  s:âĽ  s:âĽ  s:B  [s: âźB]11  âźE  [s:B]12  âźE  s:âĽ  â¨E 12  RAAâĽ 11  [s=r]8  [r: âźB]4  r:B  r:âĽ  mon  âźE  uf 1  â  and Ď3 is:  [t:(G(Aâ¨B)â§G(Aâ¨GB)â§G(GAâ¨B))]1  â§E  t:G(GAâ¨B)  [r: âźGA]9  [t<r]4  [r:GA]10  r:GAâ¨B  r:âĽ  r:âĽ  r:GA  [r: âźB]4  âźE  GE  [r:B]10  r:âĽ  âźE  â¨E 10  RAAâĽ 9  [r<s]8  [s: âźA]3  GE  s:A  s:âĽ  âźE  uf 1  â  Figure 10. Derivation of the axiom (G4 )  [t<râr<s]4  âx.y. x<yââz. (x<zâz<y)  ây. (t<yââz. (t<zâz<y))  t<sââz. (t<zâz<s)  [s:A]  dens  [t: âźFFA]  [t<s]2  t<r  t:FFA  âźE  uf 1  â  â  t:âĽ  t:FFA  t:FAâFFA  3  t:âĽ  âz. (t<zâz<s)  t:FFA  [t<râr<s]4  r:FA  âE  [t:FA]1  âE  r<s  FI  âE  âE  2  âE 4  uf 2  RAAâĽ 3  FE 2  âI 1  Figure 11. Derivation of the modal axiom for right-density  19  âE  FI  Ď  â  r:âĽ  âx.y. x<yâ(âz. x<zâ(ÂŹâu. x<uâu<z))  ây. t<yâ(âz. t<zâ(âu. ÂŹ(t<u)âÂŹ(u<z)))  t<qâ(âz. t<zâ(âu. ÂŹ(t<u)âÂŹ(u<z)))  [t:Fâ¤â§Aâ§HA]  1  rdiscr  r:A  âE  s:HA  [t<u]3  HI 5  [t<sâ(âu. ÂŹ(t<u)âÂŹ(u<s))]4  t<s  âE  FI  t:FHA  t:âĽ  âE  âźE  uf 1  â  âz. t<zâ(âu. ÂŹ(t<u)âÂŹ(u<z))  âE 4  â  â  RAAâĽ 6  [t: âźFHA]2  âE  â§E  t:Fâ¤  uf 2  FE  3  uf 2  t:âĽ  RAAâĽ 2  t:FHA  t:(Fâ¤â§Aâ§HA)âFHA  âI 1  where Ď is:  [t:Fâ¤â§Aâ§HA]1  â§E  t:HA  conn  âx.y. x<yâx=yây<x  ây. r<yâr=yây<r  r<târ=tât<r  [r: âźA]  6  [r<t]7  HE  r:A  âE  r:âĽ  âE  âźE  Ď1  uf 1  â  â  â  âE 7  and Ď1 is:  [t:Fâ¤â§Aâ§HA]1  t:A  [r: âźA]6  r:âĽ  [r=tât<r]  7  â§E  [r=t]8  r:A  âźE  [t<sâ(âu.ÂŹ(t<u)âÂŹ(u<s))]4  mon  ÂŹ(t<r)âÂŹ(r<s)  uf 1  âE  âu.ÂŹ(t<u)âÂŹ(u<s)  â  [ÂŹ(t<r)]9  âE  [t<r]8  â  âE 8  Figure 12. Derivation of the modal axiom for right-discreteness  20  [r<s]5  ÂŹE  â  âE 9  â  â  [ÂŹ(r<s)]9  ÂŹE  these transformations, we get a derivation of Ď from Î, â where the conclusions of applications of RAAâĽ , RAAâ , and mon  are atomic.  (1) First, we consider applications of RAAâĽ . There are three possible cases, depending on whether the conclusion is  x : B â C, x : GB, or x : HB. Note that in the following transformations we only show the part of the derivation where the  reduction, denoted by , actually takes place; the missing parts remain unchanged.  (Case 1)  [x:BâC]1  [x:CââĽ]  2  x:C  [x:(BâC)ââĽ]  x:âĽ  Ď  x:(BâC)ââĽ  y:âĽ  [x:B]3  âE  âE  âI 1  Ď  RAAâĽ  x:BâC  y:âĽ  RAAâĽ 2  x:C  âI 3  x:BâC  (Case 2)  [x:GB]1  GE  [y:BââĽ]2  y:B  y:âĽ  [x:GBââĽ]  y:âĽ  x:GBââĽ  Ď  RAAâĽ  âE  RAAâĽ  Ď  x:âĽ  x:GB  [x<y]3  y:âĽ  âI 1  RAAâĽ 2  y:B  x:GB  GI 3  Case 3 concerns formulas of the form y : HA; it is analogous to the previous one and we omit the reduction for it.  (2) Applications of RAAâ can be reduced to applications on formulas of lower grade, following an approach analogous  to that of RAAâĽ . It is easy to see that in this case, we can also restrict to applications of RAAâ in which the conclusion is  not â. We have to consider two possibilities: formulas of the form Ď1 â Ď2 and formulas of the form âx. Ď. We consider only  the second case, since the first one is analogous to the case of implication for labeled formulas:  [Ďââ]1  [âx. Ďââ]  âx. Ďââ  Ď  Ď  â  â  RAAâ  âx. Ď  Ď  âx. Ď  âI  RAA1â  âI  (3) Finally, we consider applications of the rule mon. We have five cases depending on the form of the formula that is the  major premise of the mon application:  (a) x : A â B  (b) x : GA  (c) x : HA  (d) Ď1 â Ď2  (e) âx. Ď  21  Ď  Ď1  x=z  xRy  zRy  Ď  mon  Ď2  Ď1  x=z  xRy  y=u  zRu  Ď3  mon  mon  zRy  z=v  vRy  mon  vRu  Ď3  z=v  mon  vRu  Ď2  y=u  mon  Figure 13. Rule permutation for the ordering of mon applications  (Case a)  [y:A]1  x:AâB  x:AâB  x=y  mon  y:AâB  x=y  x:A  mon  âE  x:B  x=y  y:B  mon  âI 1  y:AâB  (Case b)  [y<z]1  x:GA  x=y  x:GA  mon  y:GA  x=y  x<z  z:A  y:GA  mon  GE  GI 1  (Case e)  âx. Ď  âx. Ď  âE  Ď  y=z  mon  y=z  mon  Ď[z/y]  âx. Ď[z/y]  âx. Ď[z/y]  âI  The case (c) is analogous to (b), while the transformation for the case (d) is as in (a) where â plays the role of â.  (ii) We show that every application of mon on a lwff of the form x :âĽ can be replaced by an application of RAAâĽ that  does not discharge any assumption:  Ď  Ďâ˛  x=y  x:âĽ  y:âĽ  Ď  x:âĽ  mon  RAAâĽ  y:âĽ  âŁ  Proof [Lemma 9] We follow the procedure based on proper reductions used in [19] and we only treat the cases âI/âE,  GI/GE and âI/âE. The transformations for the detours â I/â E and HI/HI can be easily inferred from these. Any formula  Ď in a derivation is the root of a tree of rule applications leading back to assumptions. We call side formulas of Ď the formulas  in this tree other than Ď. In order to eliminate maximal formulas from a derivation, it suffices to apply the transformations  listed below, picking in the set of maximal formulas the formula with the highest grade that has only maximal formulas of  lower grade as side formulas, and iterating this process until there are no more maximal formulas in the proof. The process  ends because at every step no new maximal formula as large as (or larger than) the eliminated one is introduced.  [x:A]  Ď2  Ď1  (i)  x:B  x:AâB  âI  x:A  Ď1  Ď2  x:A  x:B  âE  x:B  [x<y]  (ii)  Ď  x<z  y:A  Ď[z/y]  GI  x:GA  x<z  z:A  22  GE  z:A  Ď  Ď  (iii)  âx. Ď  Ď[y/x]  âI  Ď[y/x]  Ď[y/x]  âE  Finally, in Fig. 13 we show how to permute applications of rules in order to get a derivation where, given a sequence of mon  applications, the ones on the same label position occur one immediately below the other. We denote with R a relational  symbol that can stay both for < and for =. In the derivation on the left, the first and the third application of mon refer to the  same label position and thus are moved one immediately below the other. The derivations obtained in this way will then be  further simplified during the normalization process.  âŁ  Proof [Theorem 11] First, we observe that by Lemma 9 we can obtain a derivation in pre-normal form. Now let us show  how to remove redundant formulas. We know from Lemma 7 that every application of a falsum-rule has an atomic formula  as a conclusion. Thus it is sufficient to consider the following transformations:  Îâ  Ď  Îâ  Ď  x:âĽ  (i)  y:âĽ  RAAâĽ  x:âĽ  RAAâĽ  z:A  z:A  RAAâĽ  where A is âĽ or an atomic formula. Note that if the formula z : A ââĽ is contained in Î and discharged by the second  application of RAAâĽ in the derivation on the left, then the same can be done in the derivation on the right.  Ď  x:âĽ  (ii)  y:âĽ  Ď  RAAâĽ  x:âĽ  uf 1  uf 1  â  â  Ď  x:âĽ  (iii)  â  Ď  uf 1  x:âĽ  uf 2  y:âĽ  y:âĽ  RAAâĽ  Ď  (iv)  â  x:âĽ  Ď  uf 2  â  uf 1  â  For the rule mon, given the ordering of mon applications obtained by permutations defined in Lemma 9, the only case we  have to treat is when two applications of mon working on the same label position of a formula occur consecutively. Then  we simply exploit the transitivity of = (obtained by using mon). Note that, by Lemma 7, in the following reduction Ď is an  atomic formula.  Ď  Ď  1  Ď  2  x=y  mon  Ď[y/x]  Ď1  Ď3  y=z  Ď  mon  Ď2  Ď3  x=y  y=z  x=z  mon  mon  Ď[z/x]  Ď[z/x]  âŁ  Proof [Lemma 13] (i) and (ii) follow from the absence of maximal formulas in a normal derivation: in a track t, no  introduction rule application can precede an application of an elimination rule. In other words, a track in a normal derivation  is such that the elimination part (when not empty) starts with a non-atomic formula and consists of some applications of  elimination-rules; if the elimination part ends with an atomic formula, then the central part (when not empty) consists of  some applications of rules whose conclusion is still an atomic formula; the introduction part (when not empty) starts with an  atomic formula and consists of some applications of introduction rules (see Fig 4).  23  (iii) comes from the fact that in a normal derivation a falsum-rule and the mon-rule can be applied only to atomic formulas.  (iv) follows directly from the absence of redundant formulas in a normal derivation (see Theorem 11).  For (v) and (vi), observe that tracks originating from an application of uf 1 or uf 2 start with an atomic formula and thus  cannot have an elimination part, while tracks ending in an application of uf 1 or uf 2 end with an atomic formula and thus  their introduction part must be empty.  âŁ  24 